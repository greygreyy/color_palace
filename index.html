<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°°ìƒ‰ ì›ë¦¬ ê¸°ë°˜ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ ì¶”ì²œê¸°</title>
    <!-- Tailwind CSS CDN ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7378175409077767"
     crossorigin="anonymous"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }
        /* 2D ìƒ‰ìƒ ì„ íƒ í•„ë“œ (Saturation & Lightness) */
        .color-field {
            /* Base color set by JS, then overlaid with gradients for S & L */
            position: relative;
            cursor: crosshair;
        }
        /* ëª…ë„(Lightness) ê·¸ë¼ë°ì´ì…˜ (ìœ„ì—ì„œ íˆ¬ëª…, ì•„ë˜ì—ì„œ ë¸”ë™ - í‘œì¤€ HSB/HSV ëª¨ë¸ ì‹œê°í™”) */
        .color-field::after {
            content: '';
            position: absolute;
            inset: 0;
            /* ì•„ë˜ìª½(bottom)ì„ ë¸”ë™(V=0%)ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤. */
            background: linear-gradient(to bottom, transparent, black); 
            pointer-events: none;
        }
        /* ì±„ë„(Saturation) ê·¸ë¼ë°ì´ì…˜ (ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ í™”ì´íŠ¸) */
        .color-field::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to right, white, transparent); /* Saturation (0% at left) */
            pointer-events: none;
        }

        /* Hue ìŠ¬ë¼ì´ë” (ìƒ‰ìƒ ë ) */
        .hue-slider {
            width: 40px; /* ê³ ì • ë„ˆë¹„ */
            background: linear-gradient(
                to top, 
                hsl(0, 100%, 50%), 
                hsl(60, 100%, 50%), 
                hsl(120, 100%, 50%), 
                hsl(180, 100%, 50%), 
                hsl(240, 100%, 50%), 
                hsl(300, 100%, 50%), 
                hsl(360, 100%, 50%)
            );
            cursor: pointer;
        }
        
        /* ì‚¬ìš©ì ì„ íƒ ìœ„ì¹˜ ë§ˆì»¤ (S/L í•„ë“œ) */
        .selection-marker {
            position: absolute;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 0 0 2px black;
            transform: translate(-50%, -50%);
            pointer-events: none;
            transition: opacity 0.1s ease;
        }

        /* Hue ì„ íƒ ë§ˆì»¤ (ìŠ¬ë¼ì´ë”) */
        .hue-marker {
            position: absolute;
            left: 0;
            right: 0;
            height: 8px;
            background-color: white;
            border-radius: 9999px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            transform: translateY(-50%);
            pointer-events: none;
            transition: opacity 0.1s ease;
        }

        .color-box {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .color-box:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen">

    <div class="max-w-4xl mx-auto">
        <header class="mb-8">
            <h1 class="text-3xl font-extrabold text-gray-900 mb-2">ğŸ¨ ë°°ìƒ‰ ì›ë¦¬ íŒ”ë ˆíŠ¸ ì¶”ì²œê¸°</h1>
            <p class="text-gray-500">
                ì„ íƒí•œ ìƒ‰ìƒ(ìƒ‰ìƒ, ì±„ë„, ëª…ë„)ì„ ê¸°ì¤€ìœ¼ë¡œ ë°°ìƒ‰ ê¸°ë²•ì„ í™œìš©í•˜ì—¬ 5ê°€ì§€ ì¡°í™”ë¡œìš´ ìƒ‰ìƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.
            </p>
        </header>

        <!-- 1. ìƒ‰ìƒ ì„ íƒ ì˜ì—­ (2D ìƒ‰ìƒ í•„ë“œ + Hue ìŠ¬ë¼ì´ë”) -->
        <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">1. í¬ì¸íŠ¸ ìƒ‰ìƒ ì„ íƒ</h2>
            <div class="flex gap-4 items-stretch h-96">
                
                <!-- 2D ìƒ‰ìƒ í•„ë“œ (Saturation & Lightness) - ì •ì‚¬ê°í˜• ì˜ì—­ -->
                <div id="colorField" class="relative flex-grow h-full w-full rounded-xl overflow-hidden border-2 border-gray-200 color-field">
                    <!-- S/L ì„ íƒ ë§ˆì»¤ -->
                    <div id="selectionMarker" class="selection-marker opacity-0"></div>
                </div>

                <!-- Hue ìŠ¬ë¼ì´ë” -->
                <div id="hueSlider" class="relative rounded-xl overflow-hidden border-2 border-gray-200 hue-slider">
                    <!-- Hue ì„ íƒ ë§ˆì»¤ -->
                    <div id="hueMarker" class="hue-marker opacity-0"></div>
                </div>
            </div>
            
            <p id="selectedColorDisplay" class="text-center mt-4 text-lg font-medium">
                ì„ íƒëœ ìƒ‰ìƒ: <span id="currentHex" class="font-bold text-gray-900">#FF0000</span>
            </p>
        </div>
        

        <!-- 2. ì¶”ì²œ íŒ”ë ˆíŠ¸ ì˜ì—­ -->
        <div class="bg-white p-6 rounded-xl shadow-lg">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">2. ì¶”ì²œ íŒ”ë ˆíŠ¸ (6ê°€ì§€ ìƒ‰ìƒ)</h2>
            <div id="paletteContainer" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4">
                <!-- ì»¬ëŸ¬ ë°•ìŠ¤ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì‚½ì…ë©ë‹ˆë‹¤. -->
            </div>
        </div>

    </div>

    <!-- 3. ê´‘ê³  ì˜ì—­ (Advertisement Area) -->
    <div class="max-w-4xl mx-auto mt-8 p-4 bg-gray-100 rounded-xl border border-gray-300 text-center text-gray-600">
        <!-- 2. [ê´‘ê³  ì„¤ì •] : ê´‘ê³  ë‹¨ìœ„ ì½”ë“œ (<ins> ë˜ëŠ” <div>)ë¥¼ ì—¬ê¸°ì— ì‚½ì…í•©ë‹ˆë‹¤. -->
        <p class="font-semibold mb-2">ê´‘ê³  ë°°ë„ˆ ì˜ì—­ (Advertisement Banner)</p>
        <div class="w-full h-20 bg-gray-200 flex items-center justify-center rounded-lg">
            <span class="text-sm">728x90px (ê´‘ê³  ë‹¨ìœ„ ì½”ë“œ ì‚½ì… ìœ„ì¹˜)</span>
            <!-- 
            ì—¬ê¸°ì— ê´‘ê³  ë„¤íŠ¸ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” <ins> ë˜ëŠ” <div> í˜•íƒœì˜ ê´‘ê³  ë‹¨ìœ„ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
            ì˜ˆì‹œ:
            <ins class="adsbygoogle"
                 style="display:inline-block;width:728px;height:90px"
                 data-ad-client="ca-pub-XXXXXXXXXXXXX"
                 data-ad-slot="YYYYYYYYYY"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
            -->
        </div>
    </div>


    <script type="module">
        // -----------------------------------------------------------
        // 1. ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (HSL <-> HEX ë³€í™˜ ë° ë³´ì¡° í•¨ìˆ˜)
        // -----------------------------------------------------------

        /**
         * HSL ê°’ì„ HEX ì½”ë“œë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
         * @param {number} h Hue (0-360)
         * @param {number} s Saturation (0-100)
         * @param {number} l Lightness (0-100)
         * @returns {string} HEX ì½”ë“œ (#RRGGBB)
         */
        function hslToHex(h, s, l) {
            h = Math.max(0, Math.min(360, h));
            s = Math.max(0, Math.min(100, s));
            l = Math.max(0, Math.min(100, l));
            
            s /= 100;
            l /= 100;
            let c = (1 - Math.abs(2 * l - 1)) * s,
                x = c * (1 - Math.abs((h / 60) % 2 - 1)),
                m = l - c / 2,
                r = 0, g = 0, b = 0;

            if (0 <= h && h < 60) {
                r = c; g = x; b = 0;
            } else if (60 <= h && h < 120) {
                r = x; g = c; b = 0;
            } else if (120 <= h && h < 180) {
                r = 0; g = c; b = x;
            } else if (180 <= h && h < 240) {
                r = 0; g = x; b = c;
            } else if (240 <= h && h < 300) {
                r = x; g = 0; b = c;
            } else if (300 <= h && h < 360) {
                r = c; g = 0; b = x;
            }
            r = Math.round((r + m) * 255).toString(16);
            g = Math.round((g + m) * 255).toString(16);
            b = Math.round((b + m) * 255).toString(16);

            if (r.length === 1) r = "0" + r;
            if (g.length === 1) g = "0" + g;
            if (b.length === 1) b = "0" + b;

            return "#" + r + g + b;
        }

        /**
         * HEX ì½”ë“œë¥¼ HSL ê°’ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. (í…ìŠ¤íŠ¸ ìƒ‰ìƒ ê²°ì •ì— ì‚¬ìš©)
         */
        function hexToHsl(hex) {
            let r = 0, g = 0, b = 0;
            if (hex.length === 4) {
                r = parseInt(hex[1] + hex[1], 16);
                g = parseInt(hex[2] + hex[2], 16);
                b = parseInt(hex[3] + hex[3], 16);
            } else if (hex.length === 7) {
                r = parseInt(hex.substring(1, 3), 16);
                g = parseInt(hex.substring(3, 5), 16);
                b = parseInt(hex.substring(5, 7), 16);
            }

            r /= 255; g /= 255; b /= 255;

            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0; // Grayscale
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }

        /**
         * HSB/HSV (H, S_hsv, V)ë¥¼ RGB (0-255)ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
         * ì´ í•¨ìˆ˜ëŠ” HSL ëª…ë„(L)ë¥¼ ì—­ì‚°í•˜ê¸° ìœ„í•œ ì¤‘ê°„ ë‹¨ê³„ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
         */
        function hsvToRgb(h, s_hsv, v) {
            h /= 360; // H (0-1)
            s_hsv = Math.max(0, Math.min(1, s_hsv)); // S_hsv (0-1)
            v = Math.max(0, Math.min(1, v));         // V (0-1)

            let r, g, b;
            let i = Math.floor(h * 6);
            let f = h * 6 - i;
            let p = v * (1 - s_hsv);
            let q = v * (1 - f * s_hsv);
            let t = v * (1 - (1 - f) * s_hsv);

            switch (i % 6) {
                case 0: r = v; g = t; b = p; break;
                case 1: r = q; g = v; b = p; break;
                case 2: r = p; g = v; b = t; break;
                case 3: r = p; g = q; b = v; break;
                case 4: r = t; g = p; b = v; break;
                case 5: r = v; g = p; b = q; break;
            }

            return {
                r: Math.round(r * 255),
                g: Math.round(g * 255),
                b: Math.round(b * 255)
            };
        }

        /**
         * RGB (0-255)ë¥¼ HSL Lightness (L, 0-100)ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
         */
        function rgbToHslLightness(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let l = (max + min) / 2;
            return Math.round(l * 100);
        }

        // -----------------------------------------------------------
        // 2. ë°°ìƒ‰ ì›ë¦¬ êµ¬í˜„ í•¨ìˆ˜
        // -----------------------------------------------------------

        /**
         * ì„ íƒëœ ìƒ‰ìƒ(H, S, L)ì„ ê¸°ë°˜ìœ¼ë¡œ ë°°ìƒ‰ ì›ë¦¬ì— ë”°ë¥¸ 5ê°€ì§€ ìƒ‰ìƒì„ ê³„ì‚°í•©ë‹ˆë‹¤.
         */
        function calculatePalette(h, s, l) {
            
            const baseH = h;
            const baseS = s;
            const baseL = l;

            // --- 1. Calculate All Colors ---

            // Main Color (í¬ì¸íŠ¸ ìƒ‰ìƒ)
            const mainColor = { hex: hslToHex(baseH, baseS, baseL), type: "í¬ì¸íŠ¸ ìƒ‰ìƒ", principle: "Main" };

            // Complementary Color (ë³´ìƒ‰ ëŒ€ë¹„ - H Â± 180Â°)
            const hComp = (baseH + 180) % 360;
            const sComp = Math.min(100, baseS + 5); 
            const lComp = Math.max(10, Math.min(90, baseL)); 
            const compColor = { 
                hex: hslToHex(hComp, sComp, lComp), 
                type: "ë³´ìƒ‰", 
                principle: "ë³´ìƒ‰ ëŒ€ë¹„ (Complementary Contrast)" 
            };

            // Analogous Color 1 (+30Â°) (ìœ ì‚¬ìƒ‰ ëŒ€ë¹„)
            const hAnalog1 = (baseH + 30) % 360;
            const analog1Color = { 
                hex: hslToHex(hAnalog1, baseS, baseL), 
                type: "ìœ ì‚¬ìƒ‰ (+30Â°)", 
                principle: "ìœ ì‚¬ìƒ‰ ëŒ€ë¹„ (Analogous Contrast)" 
            };

            // Analogous Color 2 (-30Â°) (ìœ ì‚¬ìƒ‰ ëŒ€ë¹„)
            const hAnalog2 = (baseH - 30 + 360) % 360;
            const analog2Color = { 
                hex: hslToHex(hAnalog2, baseS, baseL), 
                type: "ìœ ì‚¬ìƒ‰ (-30Â°)", 
                principle: "ìœ ì‚¬ìƒ‰ ëŒ€ë¹„ (Analogous Contrast)" 
            };
            
            // Tone-on-Tone (Lighter) (ë°ê²Œ)
            const lToneL = Math.min(95, baseL + 15);
            const sToneL = Math.max(10, baseS - 10); 
            const toneLightColor = { 
                hex: hslToHex(baseH, sToneL, lToneL), 
                type: "í†¤ì˜¨í†¤ (ë°ê²Œ)", 
                principle: "í†¤ì˜¨í†¤ (Tone-on-Tone)" 
            };

            // Tone-on-Tone (Darker) (ì–´ë‘¡ê²Œ)
            const lToneD = Math.max(15, baseL - 15);
            const sToneD = Math.max(20, baseS - 20);
            const toneDarkColor = { 
                hex: hslToHex(baseH, sToneD, lToneD), 
                type: "í†¤ì˜¨í†¤ (ì–´ë‘¡ê²Œ)", 
                principle: "í†¤ì˜¨í†¤ (Tone-on-Tone)" 
            };
            
            // --- 2. Construct Palette in Requested Order (Main -> Tone Dark -> Tone Light -> Analogous +30 -> Analogous -30 -> Complementary) ---
            const palette = [];
            palette.push(mainColor);
            palette.push(toneDarkColor);    // 1. í†¤ì˜¨í†¤ (ì–´ë‘¡ê²Œ)
            palette.push(toneLightColor);   // 2. í†¤ì˜¨í†¤ (ë°ê²Œ)
            palette.push(analog1Color);     // 3. ìœ ì‚¬ìƒ‰ (+30Â°)
            palette.push(analog2Color);     // 4. ìœ ì‚¬ìƒ‰ (-30Â°)
            palette.push(compColor);        // 5. ë³´ìƒ‰

            return palette;
        }

        // -----------------------------------------------------------
        // 3. UI ë° ì´ë²¤íŠ¸ ì²˜ë¦¬
        // -----------------------------------------------------------

        const colorField = document.getElementById('colorField');
        const hueSlider = document.getElementById('hueSlider');
        const selectionMarker = document.getElementById('selectionMarker');
        const hueMarker = document.getElementById('hueMarker');
        const currentHexElement = document.getElementById('currentHex');
        const paletteContainer = document.getElementById('paletteContainer');
        
        // ìƒíƒœ ë³€ìˆ˜ (STATE VARIABLES)
        // ì „ì—­ ë³€ìˆ˜ ì„ ì–¸ ì‹œ let í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ReferenceErrorë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
        let currentHue = 0;      // ìƒ‰ìƒ (0-360)
        let currentSaturation = 100; // ì±„ë„ (0-100)
        let currentLightness = 50;   // ëª…ë„ (0-100)

        // ì´ˆê¸° ìƒíƒœ ì„¤ì •
        let isDraggingColor = false;
        let isDraggingHue = false;


        /**
         * S/L í•„ë“œì˜ ë°°ê²½ìƒ‰ì„ í˜„ì¬ ì„ íƒëœ Hueì— ë”°ë¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
         */
        function updateColorFieldBackground(hue) {
            // Saturation 100%, Lightness 50%ì¼ ë•Œì˜ ìƒ‰ìƒ
            const baseColor = `hsl(${hue}, 100%, 50%)`;
            colorField.style.backgroundColor = baseColor;
        }
        
        /**
         * S/L í•„ë“œ, HEX í‘œì‹œ, íŒ”ë ˆíŠ¸ ì „ì²´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
         */
        function updateAll() {
            const currentHex = hslToHex(currentHue, currentSaturation, currentLightness);
            
            // 1. HEX ì½”ë“œ ì—…ë°ì´íŠ¸
            currentHexElement.textContent = currentHex;
            currentHexElement.style.color = currentHex;
            selectionMarker.style.backgroundColor = currentHex; // ë§ˆì»¤ ìƒ‰ìƒë„ ì—…ë°ì´íŠ¸

            // 2. íŒ”ë ˆíŠ¸ ê³„ì‚° ë° ë Œë”ë§
            const palette = calculatePalette(currentHue, currentSaturation, currentLightness);
            paletteContainer.innerHTML = ''; // íŒ”ë ˆíŠ¸ ì»¨í…Œì´ë„ˆ ë¹„ìš°ê¸°

            palette.forEach((color, index) => {
                // HEX ì½”ë“œë¥¼ HSLë¡œ ë³€í™˜í•˜ì—¬ ëª…ë„(L)ë¥¼ ì–»ì–´ í…ìŠ¤íŠ¸ ìƒ‰ìƒì„ ê²°ì •í•©ë‹ˆë‹¤.
                const { l } = hexToHsl(color.hex); 
                const textColor = l > 60 ? 'text-gray-800' : 'text-gray-100';
                
                const isMain = index === 0;
                const borderStyle = isMain ? 'border-4 border-gray-400 shadow-xl' : 'border border-gray-200 shadow-md';
                const labelText = isMain ? 'í¬ì¸íŠ¸ ìƒ‰ìƒ' : color.type;
                
                // ì •ì‚¬ê°í˜• ë¹„ìœ¨ ìœ ì§€ (Padding Hack)
                const boxHtml = `
                    <div class="color-box relative w-full h-0 pb-[100%] rounded-xl overflow-hidden ${borderStyle}" style="background-color: ${color.hex};">
                        <div class="absolute inset-0 flex flex-col justify-end p-2 sm:p-3 bg-black bg-opacity-30 rounded-xl">
                            <span class="text-sm font-bold ${textColor}">${color.hex}</span>
                            <span class="text-xs font-medium text-gray-200 mt-1">${labelText}</span>
                            <span class="text-xs font-light text-gray-300 mt-0.5">${color.principle || 'N/A'}</span>
                        </div>
                    </div>
                `;
                paletteContainer.innerHTML += boxHtml;
            });
        }
        
        /**
         * S/L í•„ë“œ í´ë¦­/ë“œë˜ê·¸ í•¸ë“¤ëŸ¬
         */
        function handleColorFieldInteraction(event) {
            const rect = colorField.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            // Xì¶• (Saturation): 0 (Left) to 1 (Right) -> HSB Saturation (S_hsv)
            const s_hsv = Math.min(1, Math.max(0, x / rect.width)); 
            
            // Yì¶• (Value/Brightness): 1 (Top) to 0 (Bottom) -> HSB Value (V)
            const l_perc = Math.min(1, Math.max(0, y / rect.height));
            const v_hsv = 1 - l_perc; 

            // 1. HSB/HSV ê°’ì„ RGBë¡œ ë³€í™˜í•˜ì—¬ ì‹œê°ì ìœ¼ë¡œ ì„ íƒëœ ìƒ‰ìƒì„ ì–»ìŠµë‹ˆë‹¤.
            const { r, g, b } = hsvToRgb(currentHue, s_hsv, v_hsv);

            // 2. RGBì—ì„œ HSL Lightness (L)ë¥¼ ì—­ì‚°í•©ë‹ˆë‹¤. (ì´ê²ƒì´ ë¶ˆì¼ì¹˜ í•´ê²°ì˜ í•µì‹¬)
            currentLightness = rgbToHslLightness(r, g, b);
            
            // 3. HSL S(ì±„ë„)ëŠ” HSB S(ì±„ë„)ì™€ ë‹¤ë¥´ì§€ë§Œ, ë°°ìƒ‰ ì›ë¦¬ ê³„ì‚°ì„ ìœ„í•´ HSB S ê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
            // S_hsv (0-1)ë¥¼ 0-100ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥í•©ë‹ˆë‹¤.
            currentSaturation = Math.round(s_hsv * 100); 


            // ë§ˆì»¤ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            selectionMarker.style.left = `${s_hsv * 100}%`;
            selectionMarker.style.top = `${l_perc * 100}%`;
            selectionMarker.classList.remove('opacity-0');

            updateAll();
        }

        /**
         * Hue ìŠ¬ë¼ì´ë” í´ë¦­/ë“œë˜ê·¸ í•¸ë“¤ëŸ¬
         */
        function handleHueSliderInteraction(event) {
            const rect = hueSlider.getBoundingClientRect();
            const y = event.clientY - rect.top;

            // Yì¶• (Hue): 0 (Bottom) to 360 (Top)
            const h_perc = Math.min(1, Math.max(0, y / rect.height));
            
            // CSS ê·¸ë¼ë°ì´ì…˜ì´ to top (ì•„ë˜ 0ë„, ìœ„ 360ë„)ì´ë¯€ë¡œ, y=0(ìƒë‹¨)ì´ 360ë„, y=1(í•˜ë‹¨)ì´ 0ë„ì— ê°€ê¹ìŠµë‹ˆë‹¤.
            currentHue = Math.round((1 - h_perc) * 360) % 360;

            // ë§ˆì»¤ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            hueMarker.style.top = `${h_perc * 100}%`;
            hueMarker.classList.remove('opacity-0');
            hueMarker.style.backgroundColor = hslToHex(currentHue, 100, 50);

            // S/L í•„ë“œì˜ ë°°ê²½ìƒ‰ì„ ì—…ë°ì´íŠ¸í•˜ê³  ì „ì²´ UI ì—…ë°ì´íŠ¸
            updateColorFieldBackground(currentHue);
            
            // Hueê°€ ë³€ê²½ë˜ì—ˆìœ¼ë¯€ë¡œ, í˜„ì¬ ë§ˆì»¤ ìœ„ì¹˜ì—ì„œ Lightnessë¥¼ ë‹¤ì‹œ ê³„ì‚°í•˜ì—¬ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
            // ë§ˆì»¤ì˜ í˜„ì¬ ìœ„ì¹˜(s_hsv, l_perc)ë¥¼ ê°€ì ¸ì™€ handleColorFieldInteractionë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
            const s_hsv = currentSaturation / 100; // í˜„ì¬ Saturation (0-1)
            
            // HSB/HSVì˜ V(Value)ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ HSL L(Lightness)ì„ ì—­ì‚°í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
            // HSL Lì„ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ì‹œ l_perc(0-1)ë¥¼ ê³„ì‚°í•˜ê³ , ì´ê²ƒì„ 1ì—ì„œ ë¹¼ì„œ V(Value)ë¡œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
            // ë³µì¡í•œ HSL <-> HSV ë³€í™˜ ë¬¸ì œë¥¼ í”¼í•˜ê¸° ìœ„í•´,
            // í˜„ì¬ Lightnessë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ì‹œ í•„ë“œ ë‚´ ë§ˆì»¤ì˜ yì¢Œí‘œ(l_perc)ë¥¼ ì—­ì‚°í•©ë‹ˆë‹¤.
            
            // HSB/HSV ê°’ì„ RGBë¡œ ë³€í™˜í•˜ì—¬ ì‹œê°ì ìœ¼ë¡œ ì„ íƒëœ ìƒ‰ìƒì„ ì–»ìŠµë‹ˆë‹¤.
            // HSB V ê°’ (0-1)ì„ êµ¬í•©ë‹ˆë‹¤. (1 - l_percëŠ” í•„ë“œ yì¶• ìœ„ì¹˜ë¥¼ ë‚˜íƒ€ëƒ„)
            const max = Math.max(0, 2 * currentLightness / 100 - currentSaturation / 100);
            const v_hsv = max + (currentSaturation / 100) * (1 - max);
            const l_perc = 1 - v_hsv;

            const { r, g, b } = hsvToRgb(currentHue, s_hsv, v_hsv);

            // RGBì—ì„œ HSL Lightness (L)ë¥¼ ì—­ì‚°í•©ë‹ˆë‹¤.
            currentLightness = rgbToHslLightness(r, g, b);
            
            updateAll();
        }

        // ë§ˆìš°ìŠ¤ ë‹¤ìš´ ì´ë²¤íŠ¸ ì„¤ì •
        colorField.addEventListener('mousedown', (e) => {
            isDraggingColor = true;
            handleColorFieldInteraction(e);
        });
        hueSlider.addEventListener('mousedown', (e) => {
            isDraggingHue = true;
            handleHueSliderInteraction(e);
        });

        // ë§ˆìš°ìŠ¤ ë¬´ë¸Œ ì´ë²¤íŠ¸ ì„¤ì •
        document.addEventListener('mousemove', (e) => {
            if (isDraggingColor) {
                handleColorFieldInteraction(e);
            } else if (isDraggingHue) {
                handleHueSliderInteraction(e);
            }
        });

        // ë§ˆìš°ìŠ¤ ì—… ì´ë²¤íŠ¸ ì„¤ì •
        document.addEventListener('mouseup', () => {
            isDraggingColor = false;
            isDraggingHue = false;
        });
        
        // í„°ì¹˜ ì´ë²¤íŠ¸ ì§€ì› ì¶”ê°€ (ëª¨ë°”ì¼ ë°˜ì‘ì„±)
        const touchHandler = (interactionFunction) => (event) => {
            event.preventDefault(); // ìŠ¤í¬ë¡¤ ë°©ì§€
            const touch = event.touches[0];
            interactionFunction(touch);
        };

        // S/L í•„ë“œ í„°ì¹˜ ì´ë²¤íŠ¸
        colorField.addEventListener('touchstart', touchHandler(handleColorFieldInteraction), { passive: false });
        colorField.addEventListener('touchmove', touchHandler(handleColorFieldInteraction), { passive: false });
        colorField.addEventListener('touchend', () => isDraggingColor = false);

        // Hue ìŠ¬ë¼ì´ë” í„°ì¹˜ ì´ë²¤íŠ¸
        hueSlider.addEventListener('touchstart', touchHandler(handleHueSliderInteraction), { passive: false });
        // TouchmoveëŠ” S/Lê³¼ Hue ìŠ¬ë¼ì´ë” ëª¨ë‘ì—ì„œ ì •í™•í•œ ìœ„ì¹˜ ê³„ì‚°ì„ ìœ„í•´ touchHandler(handleHueSliderInteraction)ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
        hueSlider.addEventListener('touchmove', touchHandler(handleHueSliderInteraction), { passive: false }); 
        hueSlider.addEventListener('touchend', () => isDraggingHue = false);


        /**
         * ì´ˆê¸°í™” í•¨ìˆ˜
         */
        function initialize() {
            // ì´ˆê¸° HSL ê°’ ì„¤ì • (ë¹¨ê°•, 100%, 50%)
            // ì „ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸ë˜ì—ˆìœ¼ë¯€ë¡œ, ì—¬ê¸°ì„œ ë‹¤ì‹œ let/constë¡œ ì„ ì–¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
            currentHue = 0;
            currentSaturation = 100;
            currentLightness = 50;
            const l_perc = 1 - (currentLightness / 100); // 50% -> 0.5

            // 1. Hue ìŠ¬ë¼ì´ë” ì´ˆê¸° ë§ˆì»¤ ìœ„ì¹˜ (ê°€ì¥ ì•„ë˜)
            hueMarker.style.top = '100%';
            hueMarker.classList.remove('opacity-0');
            hueMarker.style.backgroundColor = hslToHex(currentHue, 100, 50);
            
            // 2. S/L í•„ë“œ ì´ˆê¸° ë°°ê²½ìƒ‰ ì„¤ì •
            updateColorFieldBackground(currentHue);
            
            // 3. S/L í•„ë“œ ì´ˆê¸° ë§ˆì»¤ ìœ„ì¹˜ (Saturation 100%, Lightness 50% -> ì¤‘ì•™)
            selectionMarker.style.left = '100%'; // S=100%
            selectionMarker.style.top = `${l_perc * 100}%`; // L=50% -> 50% ìœ„ì¹˜
            selectionMarker.classList.remove('opacity-0');

            // 4. ì „ì²´ ì—…ë°ì´íŠ¸
            updateAll();
        }

        // ì•± ì‹œì‘
        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>

</html>
