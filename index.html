<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°°ìƒ‰ ì›ë¦¬ ê¸°ë°˜ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ ì¶”ì²œê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7378175409077767"
      crossorigin="anonymous"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }
        .color-field {
            position: relative;
            cursor: crosshair;
        }
        .color-field::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, transparent, black); 
            pointer-events: none;
        }
        .color-field::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to right, white, transparent); 
            pointer-events: none;
        }

        .hue-slider {
            width: 40px; 
            background: linear-gradient(
                to top, 
                hsl(0, 100%, 50%), 
                hsl(60, 100%, 50%), 
                hsl(120, 100%, 50%), 
                hsl(180, 100%, 50%), 
                hsl(240, 100%, 50%), 
                hsl(300, 100%, 50%), 
                hsl(360, 100%, 50%)
            );
            cursor: pointer;
        }
        
        .selection-marker {
            position: absolute;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 0 0 2px black;
            transform: translate(-50%, -50%);
            pointer-events: none;
            transition: opacity 0.1s ease;
        }

        .hue-marker {
            position: absolute;
            left: 0;
            right: 0;
            height: 8px;
            background-color: white;
            border-radius: 9999px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            transform: translateY(-50%);
            pointer-events: none;
            transition: opacity 0.1s ease;
        }

        .color-box {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .color-box:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen">

    <div class="max-w-4xl mx-auto">
        <header class="mb-8">
            <h1 class="text-3xl font-extrabold text-gray-900 mb-2">ğŸ¨ ë°°ìƒ‰ ì›ë¦¬ íŒ”ë ˆíŠ¸ ì¶”ì²œê¸°</h1>
            <p class="text-gray-500">
                ì„ íƒí•œ ìƒ‰ìƒ(ìƒ‰ìƒ, ì±„ë„, ëª…ë„)ì„ ê¸°ì¤€ìœ¼ë¡œ ë°°ìƒ‰ ê¸°ë²•ì„ í™œìš©í•˜ì—¬ 5ê°€ì§€ ì¡°í™”ë¡œìš´ ìƒ‰ìƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.
            </p>
        </header>

        <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">1. í¬ì¸íŠ¸ ìƒ‰ìƒ ì„ íƒ</h2>
            <div class="flex gap-4 items-stretch h-96">
                
                <div id="colorField" class="relative flex-grow h-full w-full rounded-xl overflow-hidden border-2 border-gray-200 color-field">
                    <div id="selectionMarker" class="selection-marker opacity-0"></div>
                </div>

                <div id="hueSlider" class="relative rounded-xl overflow-hidden border-2 border-gray-200 hue-slider">
                    <div id="hueMarker" class="hue-marker opacity-0"></div>
                </div>
            </div>
            
            <p id="selectedColorDisplay" class="text-center mt-4 text-lg font-medium">
                ì„ íƒëœ ìƒ‰ìƒ: <span id="currentHex" class="font-bold text-gray-900">#FF0000</span>
            </p>
        </div>
        

        <div class="bg-white p-6 rounded-xl shadow-lg">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">2. ì¶”ì²œ íŒ”ë ˆíŠ¸ (6ê°€ì§€ ìƒ‰ìƒ)</h2>
            <div id="paletteContainer" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4">
            </div>
        </div>

    </div>

    <div class="max-w-4xl mx-auto mt-8 p-4 bg-gray-100 rounded-xl border border-gray-300 text-center text-gray-600">
        <div class="w-full h-20 bg-gray-200 flex items-center justify-center rounded-lg">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7378175409077767"
            </script>
            
        </div>
    </div>


    <script type="module">
        function hslToHex(h, s, l) {
            h = Math.max(0, Math.min(360, h));
            s = Math.max(0, Math.min(100, s));
            l = Math.max(0, Math.min(100, l));
            
            s /= 100;
            l /= 100;
            let c = (1 - Math.abs(2 * l - 1)) * s,
                x = c * (1 - Math.abs((h / 60) % 2 - 1)),
                m = l - c / 2,
                r = 0, g = 0, b = 0;

            if (0 <= h && h < 60) {
                r = c; g = x; b = 0;
            } else if (60 <= h && h < 120) {
                r = x; g = c; b = 0;
            } else if (120 <= h && h < 180) {
                r = 0; g = c; b = x;
            } else if (180 <= h && h < 240) {
                r = 0; g = x; b = c;
            } else if (240 <= h && h < 300) {
                r = x; g = 0; b = c;
            } else if (300 <= h && h < 360) {
                r = c; g = 0; b = x;
            }
            r = Math.round((r + m) * 255).toString(16);
            g = Math.round((g + m) * 255).toString(16);
            b = Math.round((b + m) * 255).toString(16);

            if (r.length === 1) r = "0" + r;
            if (g.length === 1) g = "0" + g;
            if (b.length === 1) b = "0" + b;

            return "#" + r + g + b;
        }

        function hexToHsl(hex) {
            let r = 0, g = 0, b = 0;
            if (hex.length === 4) {
                r = parseInt(hex[1] + hex[1], 16);
                g = parseInt(hex[2] + hex[2], 16);
                b = parseInt(hex[3] + hex[3], 16);
            } else if (hex.length === 7) {
                r = parseInt(hex.substring(1, 3), 16);
                g = parseInt(hex.substring(3, 5), 16);
                b = parseInt(hex.substring(5, 7), 16);
            }

            r /= 255; g /= 255; b /= 255;

            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0; 
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }

        function hsvToRgb(h, s_hsv, v) {
            h /= 360; 
            s_hsv = Math.max(0, Math.min(1, s_hsv)); 
            v = Math.max(0, Math.min(1, v));         

            let r, g, b;
            let i = Math.floor(h * 6);
            let f = h * 6 - i;
            let p = v * (1 - s_hsv);
            let q = v * (1 - f * s_hsv);
            let t = v * (1 - (1 - f) * s_hsv);

            switch (i % 6) {
                case 0: r = v; g = t; b = p; break;
                case 1: r = q; g = v; b = p; break;
                case 2: r = p; g = v; b = t; break;
                case 3: r = p; g = q; b = v; break;
                case 4: r = t; g = p; b = v; break;
                case 5: r = v; g = p; b = q; break;
            }

            return {
                r: Math.round(r * 255),
                g: Math.round(g * 255),
                b: Math.round(b * 255)
            };
        }

        function rgbToHslLightness(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let l = (max + min) / 2;
            return Math.round(l * 100);
        }

        function calculatePalette(h, s, l) {
            
            const baseH = h;
            const baseS = s;
            const baseL = l;

            const mainColor = { hex: hslToHex(baseH, baseS, baseL), type: "í¬ì¸íŠ¸ ìƒ‰ìƒ", principle: "Main" };

            const hComp = (baseH + 180) % 360;
            const sComp = Math.min(100, baseS + 5); 
            const lComp = Math.max(10, Math.min(90, baseL)); 
            const compColor = { 
                hex: hslToHex(hComp, sComp, lComp), 
                type: "ë³´ìƒ‰", 
                principle: "ë³´ìƒ‰ ëŒ€ë¹„ (Complementary Contrast)" 
            };

            const hAnalog1 = (baseH + 30) % 360;
            const analog1Color = { 
                hex: hslToHex(hAnalog1, baseS, baseL), 
                type: "ìœ ì‚¬ìƒ‰ (+30Â°)", 
                principle: "ìœ ì‚¬ìƒ‰ ëŒ€ë¹„ (Analogous Contrast)" 
            };

            const hAnalog2 = (baseH - 30 + 360) % 360;
            const analog2Color = { 
                hex: hslToHex(hAnalog2, baseS, baseL), 
                type: "ìœ ì‚¬ìƒ‰ (-30Â°)", 
                principle: "ìœ ì‚¬ìƒ‰ ëŒ€ë¹„ (Analogous Contrast)" 
            };
            
            const lToneL = Math.min(95, baseL + 15);
            const sToneL = Math.max(10, baseS - 10); 
            const toneLightColor = { 
                hex: hslToHex(baseH, sToneL, lToneL), 
                type: "í†¤ì˜¨í†¤ (ë°ê²Œ)", 
                principle: "í†¤ì˜¨í†¤ (Tone-on-Tone)" 
            };

            const lToneD = Math.max(15, baseL - 15);
            const sToneD = Math.max(20, baseS - 20);
            const toneDarkColor = { 
                hex: hslToHex(baseH, sToneD, lToneD), 
                type: "í†¤ì˜¨í†¤ (ì–´ë‘¡ê²Œ)", 
                principle: "í†¤ì˜¨í†¤ (Tone-on-Tone)" 
            };
            
            const palette = [];
            palette.push(mainColor);
            palette.push(toneDarkColor);    
            palette.push(toneLightColor);   
            palette.push(analog1Color);      
            palette.push(analog2Color);      
            palette.push(compColor);         

            return palette;
        }

        const colorField = document.getElementById('colorField');
        const hueSlider = document.getElementById('hueSlider');
        const selectionMarker = document.getElementById('selectionMarker');
        const hueMarker = document.getElementById('hueMarker');
        const currentHexElement = document.getElementById('currentHex');
        const paletteContainer = document.getElementById('paletteContainer');
        
        let currentHue = 0;      
        let currentSaturation = 100; 
        let currentLightness = 50;  

        let isDraggingColor = false;
        let isDraggingHue = false;


        function updateColorFieldBackground(hue) {
            const baseColor = `hsl(${hue}, 100%, 50%)`;
            colorField.style.backgroundColor = baseColor;
        }
        
        function updateAll() {
            const currentHex = hslToHex(currentHue, currentSaturation, currentLightness);
            
            currentHexElement.textContent = currentHex;
            currentHexElement.style.color = currentHex;
            selectionMarker.style.backgroundColor = currentHex; 

            const palette = calculatePalette(currentHue, currentSaturation, currentLightness);
            paletteContainer.innerHTML = ''; 

            palette.forEach((color, index) => {
                const { l } = hexToHsl(color.hex); 
                const textColor = l > 60 ? 'text-gray-800' : 'text-gray-100';
                
                const isMain = index === 0;
                const borderStyle = isMain ? 'border-4 border-gray-400 shadow-xl' : 'border border-gray-200 shadow-md';
                const labelText = isMain ? 'í¬ì¸íŠ¸ ìƒ‰ìƒ' : color.type;
                
                const boxHtml = `
                    <div class="color-box relative w-full h-0 pb-[100%] rounded-xl overflow-hidden ${borderStyle}" style="background-color: ${color.hex};">
                        <div class="absolute inset-0 flex flex-col justify-end p-2 sm:p-3 bg-black bg-opacity-30 rounded-xl">
                            <span class="text-sm font-bold ${textColor}">${color.hex}</span>
                            <span class="text-xs font-medium text-gray-200 mt-1">${labelText}</span>
                            <span class="text-xs font-light text-gray-300 mt-0.5">${color.principle || 'N/A'}</span>
                        </div>
                    </div>
                `;
                paletteContainer.innerHTML += boxHtml;
            });
        }
        
        function handleColorFieldInteraction(event) {
            const rect = colorField.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            const s_hsv = Math.min(1, Math.max(0, x / rect.width)); 
            
            const l_perc = Math.min(1, Math.max(0, y / rect.height));
            const v_hsv = 1 - l_perc; 

            const { r, g, b } = hsvToRgb(currentHue, s_hsv, v_hsv);

            currentLightness = rgbToHslLightness(r, g, b);
            
            currentSaturation = Math.round(s_hsv * 100); 


            selectionMarker.style.left = `${s_hsv * 100}%`;
            selectionMarker.style.top = `${l_perc * 100}%`;
            selectionMarker.classList.remove('opacity-0');

            updateAll();
        }

        function handleHueSliderInteraction(event) {
            const rect = hueSlider.getBoundingClientRect();
            const y = event.clientY - rect.top;

            const h_perc = Math.min(1, Math.max(0, y / rect.height));
            
            currentHue = Math.round((1 - h_perc) * 360) % 360;

            hueMarker.style.top = `${h_perc * 100}%`;
            hueMarker.classList.remove('opacity-0');
            hueMarker.style.backgroundColor = hslToHex(currentHue, 100, 50);

            updateColorFieldBackground(currentHue);
            
            const s_hsv = currentSaturation / 100; 
            
            const max = Math.max(0, 2 * currentLightness / 100 - currentSaturation / 100);
            const v_hsv = max + (currentSaturation / 100) * (1 - max);
            const l_perc = 1 - v_hsv;

            const { r, g, b } = hsvToRgb(currentHue, s_hsv, v_hsv);

            currentLightness = rgbToHslLightness(r, g, b);
            
            updateAll();
        }

        colorField.addEventListener('mousedown', (e) => {
            isDraggingColor = true;
            handleColorFieldInteraction(e);
        });
        hueSlider.addEventListener('mousedown', (e) => {
            isDraggingHue = true;
            handleHueSliderInteraction(e);
        });

        document.addEventListener('mousemove', (e) => {
            if (isDraggingColor) {
                handleColorFieldInteraction(e);
            } else if (isDraggingHue) {
                handleHueSliderInteraction(e);
            }
        });

        document.addEventListener('mouseup', () => {
            isDraggingColor = false;
            isDraggingHue = false;
        });
        
        const touchHandler = (interactionFunction) => (event) => {
            event.preventDefault(); 
            const touch = event.touches[0];
            interactionFunction(touch);
        };

        colorField.addEventListener('touchstart', touchHandler(handleColorFieldInteraction), { passive: false });
        colorField.addEventListener('touchmove', touchHandler(handleColorFieldInteraction), { passive: false });
        colorField.addEventListener('touchend', () => isDraggingColor = false);

        hueSlider.addEventListener('touchstart', touchHandler(handleHueSliderInteraction), { passive: false });
        hueSlider.addEventListener('touchmove', touchHandler(handleHueSliderInteraction), { passive: false }); 
        hueSlider.addEventListener('touchend', () => isDraggingHue = false);


        function initialize() {
            currentHue = 0;
            currentSaturation = 100;
            currentLightness = 50;
            const l_perc = 1 - (currentLightness / 100); 

            hueMarker.style.top = '100%';
            hueMarker.classList.remove('opacity-0');
            hueMarker.style.backgroundColor = hslToHex(currentHue, 100, 50);
            
            updateColorFieldBackground(currentHue);
            
            selectionMarker.style.left = '100%'; 
            selectionMarker.style.top = `${l_perc * 100}%`; 
            selectionMarker.classList.remove('opacity-0');

            updateAll();
        }

        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>

</html>

